<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Julian Huber" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Buszugriffsverfahren - Bussysteme</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Buszugriffsverfahren";
        var mkdocs_page_input_path = "5_2_Buszugriffsverfahren.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Bussysteme
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">√úbersicht</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Geb√§udeautomation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../1_1_Geb%C3%A4udeautomation/">Geb√§udeautomation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../1_2_Planungsabl%C3%A4ufe/">Planungsabl√§ufe</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Computer-Systeme</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../2_1_Messkette/">Messkette</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_2_Steuerung/">Steuerung</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_3_Funktionen/">Funktionen</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_4_Objektorientierung/">Objektorientierung</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Regelungstechnik</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../3_1_Blockschaltbild/">Blockschaltbild </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3_2_Regelkreis/">Regelkreis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3_3_Regelverhalten/">Regelverhalten</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Speicherprogrammierbare Steuerung</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../4_1_Speicherprogrammierbare_Steuerung/">Speicherprogrammierbare Steuerung</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4_2_Sprachen_nach_IEC_61131-3/">Sprachen nach IEC 61131-3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../4_3_Appendix_Twincat/">Twincat</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Bussysteme</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../5_1_Signalisierung/">Signalisierung</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Buszugriffsverfahren</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#lernziele">üéØ Lernziele</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#herausforderung">Herausforderung</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clientserver-masterslave-verfahren">Client/Server (Master/Slave-Verfahren)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#aufgabe-5_2_1-worst-case-beim-polling">‚úçÔ∏è Aufgabe 5_2_1: Worst Case beim Polling</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#annahmen">Annahmen</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#losung">‚úîÔ∏è L√∂sung</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#einfluss-der-bus-zykluszeit-auf-komfort">Einfluss der Bus-Zykluszeit auf Komfort</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#wahrnehmbare-verzogerung-ab-60-text-ms">Wahrnehmbare Verz√∂gerung ab \(60 \text{ ms}\)</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#aufgaben-von-buszugriffsverfahren">Aufgaben von Buszugriffsverfahren</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#vermeidung-von-kollisionen">Vermeidung von Kollisionen</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ermoglichen-von-echtzeitfahigkeit">Erm√∂glichen von Echtzeitf√§higkeit</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deterministische-buszugriffsverfahren">Deterministische Buszugriffsverfahren</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#token-systeme">Token-Systeme</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#token-ring-logischer-ring">Token Ring (Logischer Ring)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#summenrahmenprotokoll">üß† Summenrahmenprotokoll</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#summenrahmenprotokoll-beispiel-ethercat">Summenrahmenprotokoll Beispiel EtherCat</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#zusammenfassung-deterministischer-buszugriffsverfahren">Zusammenfassung deterministischer Buszugriffsverfahren</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#zufallige-buszugriffsverfahren">Zuf√§llige Buszugriffsverfahren</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#carrier-sense-multiple-access-csma">üß† Carrier Sense Multiple Access (CS/MA)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#bus-kollision">üß† Bus-Kollision</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#kollisionserkennung">Kollisionserkennung</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#auflosen-einer-bus-kollision">Aufl√∂sen einer Bus-Kollision</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#zeitverhalten">Zeitverhalten</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#aufgabe-5_2_2-bewertung-eines-buszugriffsverfahrens-fur-sicherheitskritische-anwendungen">‚úçÔ∏è Aufgabe 5_2_2: Bewertung eines Buszugriffsverfahrens f√ºr sicherheitskritische Anwendungen</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#losung_1">‚úîÔ∏è L√∂sung</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../5_3_Uebertragungssicherheit/">√úbertragungssicherheit</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../5_4_Bussysteme_in_der_Gebudeautomation/">Bussysteme in der Geb√§udeautomation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Metering</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../6_1_Smart_Metering/">Smart Metering</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Bussysteme</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Bussysteme</li>
      <li class="breadcrumb-item active">Buszugriffsverfahren</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <style>
img[alt~="center"] {
  display: block;
  margin: 0 auto;
}
</style>

<!-- paginate: true -->

<h1 id="52-buszugriffsverfahren">5.2 Buszugriffsverfahren</h1>
<h3 id="lernziele">üéØ Lernziele</h3>
<p>Nach dieser Einheit sind Sie in der Lage dazu
* das Vorgehen von Client-Server, Token, Summenrahmenprokoll- und CS-MA- Buszugriffsverfahren zu beschreiben
* deren Vor- und Nachteile zu benennen
* Laufzeiten von Nachrichten auf Buskabeln zu berechnen</p>
<hr />
<p><img alt="bg" src="../images/Bus-I2C-Aufbau.png" /></p>
<p><a href="http://fmh-studios.de/theorie/informationstechnik/i2c-bus/#img1">Quelle</a></p>
<hr />
<h2 id="herausforderung">Herausforderung</h2>
<!-- _class: white -->

<p><img alt="bg height:300 right" src="../images/Buszugriff.drawio.png" /></p>
<ul>
<li>Senden mehre Busteilnehmer zeitgleich, so √ºberlagern sich die Spannungs-Pegel auf der Busleitung bzw. die Wellen</li>
<li>Inhalt der Telegramme kann nicht mehr entziffert werden</li>
<li>Im OSI-Modell Aufgabe der Sicherungs- und Vermittlungsschicht (Schicht 2&amp;3)</li>
</ul>
<hr />
<h2 id="clientserver-masterslave-verfahren">Client/Server (Master/Slave-Verfahren)</h2>
<ul>
<li>Zentrale Bussteuereinheit (<strong>Master</strong>, ggf. SPS) stellt Verbindung zu den passiven Teilnehmern (Slaves) her (<strong>Kommunikationssteuerung</strong>)</li>
<li><strong>Slaves</strong> antworten auf eine Datenanforderung des Masters unmittelbar</li>
<li><strong>Polling</strong> (zyklische Abfrage)</li>
<li>Master mit aktivem Buszugriff geben die Ein-/Ausgabedaten an die Slaves</li>
<li>einfaches Protokoll</li>
<li><strong>garantierte Buszugriffszeiten</strong> (d.h. es ist vorhersagbar, wie lange es dauert bis Information ausgetauscht werden kann)</li>
</ul>
<p><img alt="bg width:400 right:33%" src="../images/polling.png" /></p>
<p><a href="https://www.xplore-dna.net/pluginfile.php/623/mod_resource/content/2/Einf%C3%BChrung%20Feldbussysteme.pdf">Quelle</a></p>
<hr />
<h2 id="aufgabe-5_2_1-worst-case-beim-polling">‚úçÔ∏è Aufgabe 5_2_1: Worst Case beim Polling</h2>
<ul>
<li>Eine zentrale SPS fragt als Master zyklisch alle Werte von Sensoren auf einer Busleitung ab und sendet Befehle</li>
<li>insgesamt 255 Slaves, davon </li>
<li>1 Taster T√ºr√∂ffner</li>
<li>1 Motor T√ºr√∂ffner </li>
<li>Wie lange dauert es im schlimmsten Fall bis die T√ºr reagiert?</li>
</ul>
<hr />
<h3 id="annahmen">Annahmen</h3>
<ul>
<li>maximale Busleitungsl√§nge: <span class="arithmatex">\(200 \text{ m}\)</span></li>
<li>Telegramml√§nge: <span class="arithmatex">\(2\)</span> Byte</li>
<li><code>[Adresse].[Nachricht]</code></li>
<li>Zykluszeit des Masters und Slaves vernachl√§ssigbar (Antworten unmittelbar)</li>
<li>Baud-Rate <span class="arithmatex">\(9.600 \text{ Baud}\)</span> </li>
<li><a href="https://en.wikipedia.org/wiki/Manchester_code">Manchester-Code</a></li>
<li>Zykluszeit je Master + Slave: vernachl√§ssigbar</li>
<li>Signal-Laufzeit Fortpflanzung des Signals im Leiter mit Lichtgeschwindigkeit wird ebenfalls vernachl√§ssigt</li>
</ul>
<hr />
<h3 id="losung">‚úîÔ∏è L√∂sung</h3>
<ul>
<li>Abrufen eines Slaves:</li>
<li>√úbertragungszeit (wie lange belegt das Signal die Leitung):<ul>
<li>1 Bit pro 2 Baud: <span class="arithmatex">\(4.800 \frac{\text{ Bit}}{\text{s}}\)</span></li>
<li>In eine Richtung: <span class="arithmatex">\(\frac{16 \text{ Bit}}{4800 \text{ Bit}}\text{s}=3.3 \text{ ms}\)</span></li>
</ul>
</li>
<li>Abrufen aller Salves (<span class="arithmatex">\(\text{Bus-Zykluszeit}\)</span>):</li>
<li>Slaves antworten, nachdem Sie die Nachricht erhalten haben</li>
<li>Zeit pro Slave: <span class="arithmatex">\(6.6\text{ ms}\)</span></li>
<li>Wenn Befehl direkt weitergeleitet wird, aber die Teilnehmer logisch maximal auseinander: <span class="arithmatex">\(6.6 \text{ ms} \cdot 254 = 1.68 \text{ s}\)</span> </li>
<li><strong>Langsam, aber:</strong> es ist garantiert, dass es nicht l√§nger dauert (Echtzeitf√§higes System)!</li>
</ul>
<hr />
<h3 id="einfluss-der-bus-zykluszeit-auf-komfort">Einfluss der Bus-Zykluszeit auf Komfort</h3>
<p>Kopieren Sie den folgenden Code in: https://jsfiddle.net/</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;!</span><span class="nx">DOCTYPE</span><span class="w"> </span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Toggle</span><span class="w"> </span><span class="nx">Background</span><span class="w"> </span><span class="nx">Color</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="nx">Time</span><span class="w"> </span><span class="nx">Delay</span><span class="o">&lt;</span><span class="err">/title&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;white&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">changeBackground</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">var</span><span class="w"> </span><span class="nx">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;timeInput&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">      </span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">color</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;white&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;red&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;white&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span><span class="p">;</span>
<span class="w">      </span><span class="p">},</span><span class="w"> </span><span class="nx">time</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="err">/head&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;timeInput&quot;</span><span class="w"> </span><span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Enter time in ms&quot;</span><span class="o">&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;changeBackground()&quot;</span><span class="o">&gt;</span><span class="nx">Change</span><span class="w"> </span><span class="nx">Background</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="o">&lt;</span><span class="err">/body&gt;</span>
<span class="o">&lt;</span><span class="err">/html&gt;</span>
</code></pre></div>
<hr />
<h4 id="wahrnehmbare-verzogerung-ab-60-text-ms">Wahrnehmbare Verz√∂gerung ab <span class="arithmatex">\(60 \text{ ms}\)</span></h4>
<ul>
<li>ab <span class="arithmatex">\(60 \text{ ms}\)</span> nehmen Nutzer:innen eine Verz√∂gerung war</li>
<li>Diese f√ºhrt zu einem negativen Nutzererleben</li>
<li>H√§ufig kann innerhalb dieser Zeit keine R√ºckmeldung der geschalteten Aktoren erfolgen</li>
</ul>
<p><img alt="bg right h:400" src="../images/ChangeBackground.png" /></p>
<hr />
<!-- _class: white-->

<p><img alt="bg h:500" src="../images/UI-long.svg" /></p>
<hr />
<!-- _class: white-->

<p><img alt="bg h:500" src="../images/UI-short.svg" /></p>
<hr />
<div class="highlight"><pre><span></span><code>sequenceDiagram
    User Interface-&gt;&gt;Steuerung: Schalte Licht an
    Steuerung-&gt;&gt;LED-Controller: Schalte Licht an
    Note over User Interface: Wahrnehmbare Verz√∂gerung
    LED-Controller-&gt;&gt;Steuerung: Licht ist an
    Steuerung-&gt;&gt;User Interface: Licht ist an
</code></pre></div>
<div class="highlight"><pre><span></span><code>sequenceDiagram
    User Interface-&gt;&gt;Steuerung: Schalte Licht an
    Steuerung-&gt;&gt;User Interface: Licht ist an
    Steuerung-&gt;&gt;LED-Controller: Schalte Licht an
    LED-Controller-&gt;&gt;Steuerung: Licht ist an
    Steuerung-&gt;&gt;User Interface: Licht ist wirklich an
</code></pre></div>
<hr />
<h2 id="aufgaben-von-buszugriffsverfahren">Aufgaben von Buszugriffsverfahren</h2>
<p><img alt="height:500" src="../images/Buszugriffsverfahren.png" /></p>
<p><a href="Schnell &amp; Wiedemann 2019">Quelle</a></p>
<hr />
<h3 id="vermeidung-von-kollisionen">Vermeidung von Kollisionen</h3>
<!-- _class: white-->

<p><img alt="bg height:300 right" src="../images/Buszugriff.drawio.png" /></p>
<ul>
<li>verhindern: deterministische Verfahren wie Polling sorgen daf√ºr, das keine Kollisionen stattfinden</li>
<li>erkennen: zuf√§llige Verfahren lassen Kollisionen zu, k√∂nnen aber damit umgehen</li>
</ul>
<hr />
<h3 id="ermoglichen-von-echtzeitfahigkeit">Erm√∂glichen von Echtzeitf√§higkeit</h3>
<ul>
<li>kann garantiert werden, dass die Nachrichten in benennbar Zeit ankommen?</li>
<li>Polling: Langsam, aber maximale Zeit kann berechnet und garantiert</li>
<li>Zuf√§llige Buszugriffsverfahren: maximale Zeit kann nicht garantiert werden (i.d.R. nicht Echtzeitf√§hig)</li>
</ul>
<p><img alt="bg right height:400" src="../images/ZeitverhaltenEhternet.png" /></p>
<p><a href="Schnell &amp; Wiedemann 2019">Quelle</a></p>
<hr />
<ul>
<li>Zeitraum oder die Datenl√§nge f√ºr einen Kommunikationszyklus und damit maximale Zeitdauer, bis die Daten √ºbertragen <strong>ist berechenbar</strong></li>
<li>Damit w√§re auch eine Schneckenpost echtzeitf√§hig, sofern die die versprochene Zustellzeit garantiert einhalten kann</li>
<li><strong>zuf√§llige</strong> Buszugriffsverfahren sind i. d. R. <strong>nicht echtzeitf√§hig</strong></li>
</ul>
<p><img alt="bg right" src="../images/800px-Trautenfels_-_Bemalter_Schrank_2a.jpg" /></p>
<p><a href="https://de.wikipedia.org/wiki/Schneckenpost">Quelle</a></p>
<hr />
<h2 id="deterministische-buszugriffsverfahren">Deterministische Buszugriffsverfahren</h2>
<ul>
<li>deterministisch:</li>
<li>Master/Slave-Verfahren</li>
<li>Polling (zyklische Abfrage der Slaves) - Nachteil: Langsam!</li>
<li><strong>Token Systeme</strong></li>
</ul>
<hr />
<h3 id="token-systeme">Token-Systeme</h3>
<blockquote>
<p>Als Token, Zugstab, Signalstab, Streckenstab oder Kn√ºppel bezeichnet man im Eisen- und Stra√üenbahnwesen ein Objekt, dessen <strong>Besitz zum Befahren</strong> eines eingleisigen Streckenabschnitts <strong>berechtigt</strong>.</p>
</blockquote>
<ul>
<li>z.B. Innsbrucker Mittelgebirgsbahn</li>
</ul>
<p><img alt="bg right" src="../images/Netzplan_Innsbrucker_Mittelgebirgsbahn_2012.png" /></p>
<p><a href="Wiki">Quelle</a></p>
<hr />
<p><img alt="center" src="../images/Bukit_Timah_Railway_Station_in_Singapore_-_train_driver_taking_key_token.png" /></p>
<p><a href="Wiki">Quelle</a></p>
<hr />
<h4 id="token-ring-logischer-ring">Token Ring (Logischer Ring)</h4>
<p><img alt="center height:400" src="../images/TokenPassing.png" /></p>
<ul>
<li><strong>Vorsicht:</strong> Logischer Ablauf muss nicht der verbauten Topologie entsprechen</li>
</ul>
<p><a href="https://www.xplore-dna.net/pluginfile.php/623/mod_resource/content/2/Einf%C3%BChrung%20Feldbussysteme.pdf">Quelle</a></p>
<hr />
<ul>
<li><strong>alle Teilnehmer</strong> k√∂nnen die Kommunikationssteuerung √ºbernehmen (Multi-Master)</li>
<li>nur Teilnehmer mit <strong>Token hat Buszugriffsrecht</strong> und agieren dann als Master</li>
<li><strong>garantierte Buszugriffszeiten</strong>: Sender muss Token nach bestimmter Zeit wieder freigeben </li>
<li>einfache Realisierung</li>
<li>Kombination mit Master-Slave m√∂glich (Token Passing)</li>
</ul>
<p><img alt="bg right:35% height:200 " src="../images/TokenPassing.png" /></p>
<p><a href="https://www.xplore-dna.net/pluginfile.php/623/mod_resource/content/2/Einf%C3%BChrung%20Feldbussysteme.pdf">Quelle</a></p>
<hr />
<h3 id="summenrahmenprotokoll">üß† Summenrahmenprotokoll</h3>
<p><img alt="bg right:35% height:200 " src="../images/Summenrahmenprotokoll.png" /></p>
<ul>
<li>Der <strong>Master</strong> gibt alle Daten in einem <strong>Summenrahmen</strong> an alle Slaves</li>
<li>Im Summenrahmen ist eine Rahmen f√ºr die Inputs und Outputs aller Slaves gegeben</li>
<li><strong>garantierte Buszugriffszeiten</strong> (deterministischer Prozess)</li>
<li>sehr effiziente Busauslastung</li>
</ul>
<p><a href="https://www.xplore-dna.net/pluginfile.php/623/mod_resource/content/2/Einf%C3%BChrung%20Feldbussysteme.pdf">Quelle</a></p>
<hr />
<h5 id="summenrahmenprotokoll-beispiel-ethercat">Summenrahmenprotokoll Beispiel EtherCat</h5>
<p><center></p>
<p><img alt="height:450" src="../images/EhterCat.png" /></p>
<p></center></p>
<p><a href="https://www.youtube.com/watch?v=z2OagcHG-UU">Quelle</a></p>
<hr />
<p><center></p>
<p><img alt="" src="../images/Ethercat.png" /></p>
<p></center></p>
<ul>
<li>Ein- und Ausgangsklemmen werden √ºber Ethercat angesprochen</li>
<li>Hardware wie Ethernet, jedoch mit Summenrahmenprotokoll</li>
</ul>
<p><a href="https://www.beckhoff.com/de-de/produkte/i-o/ethercat/">Quelle</a></p>
<hr />
<h3 id="zusammenfassung-deterministischer-buszugriffsverfahren">Zusammenfassung deterministischer Buszugriffsverfahren</h3>
<ul>
<li>Sender <strong>vor dem Sendebeginn</strong> eindeutig <strong>bestimmt</strong></li>
<li>Buszuteilung (Sendeerlaubnis) <strong>zentral</strong> von einer Leitstation (Master/Slave-Verfahren) oder <strong>dezentral</strong> durch mehrere Steuereinheiten (Tokenbus, Tokenring)</li>
</ul>
<p><img alt="bg right:40% height:300" src="../images/Buszugriffsverfahren.png" /></p>
<p><a href="Schnell &amp; Wiedemann 2019">Quelle</a></p>
<hr />
<h2 id="zufallige-buszugriffsverfahren">Zuf√§llige Buszugriffsverfahren</h2>
<ul>
<li>die sende-willigen Teilnehmer greifen <strong>nur bei Bedarf</strong> (i.e., zuf√§llig) auf das √úbertragungsmedium zu</li>
<li>z.B. bei Taster-Bet√§tigung im Beleuchtungssystem</li>
<li>Medium darf nicht anderweitig von einem anderen Teilnehmer belegt sein (<strong>Carrier Sense</strong>, CS)</li>
<li>Ist dies der Fall, muss die Sendung auf einen sp√§teren Zeitpunkt verschoben werden (<strong>Multiple Access</strong>, MA)</li>
</ul>
<p><img alt="bg height:200 right:33%" src="../images/Buszugriff.drawio.png" /></p>
<hr />
<h3 id="carrier-sense-multiple-access-csma">üß† Carrier Sense Multiple Access (CS/MA)</h3>
<ul>
<li>falls <strong>Busleitung belegt</strong>, <strong>erneuter Versuch</strong> zu sp√§teren Zeitpunkt </li>
<li>es ist allerdings ungewiss, ob Busleitung beim n√§chsten Versuch frei ist</li>
<li>es kann keine maximale Zeit zur Datenbereitstellung garantiert (<strong>keine Echtzeitf√§hig</strong>).</li>
</ul>
<p><img alt="bg height:200 right:33%" src="../images/Buszugriff.drawio.png" /></p>
<hr />
<h4 id="bus-kollision">üß† Bus-Kollision</h4>
<ul>
<li>Zwei <strong>Sender</strong> beginnen etwa <strong>gleichzeitig</strong> mit der Sendung </li>
<li>Sendungen kollidieren und zerst√∂ren sich gegenseitig (<strong>√úberlagerung</strong> der Wellen)</li>
<li>Wird erkannt, wenn der Empf√§nger die √ºbertragenen Daten auf Fehler √ºberpr√ºft (<strong>Pr√ºfsumme</strong>)</li>
<li>Voraussetzung: Sender empfangen ihre eigenen Signale w√§hrend der Sendung. </li>
<li>ist es zur Kollision gekommen und die √úbertragung wird sofort eingestellt. (<strong>Collision Detection</strong>, CSMA/CD)</li>
</ul>
<p><img alt="bg height:600 right:45%" src="../images/BusKollision.png" /></p>
<hr />
<h4 id="kollisionserkennung">Kollisionserkennung</h4>
<ul>
<li><strong>a:</strong> Sendebeginn zum Zeitpunkt <span class="arithmatex">\(t\)</span> , </li>
<li><strong>b:</strong> Kollision zum Zeitpunkt <span class="arithmatex">\(t+t_s\)</span> 
mit <span class="arithmatex">\(t_s\)</span> Signallaufzeit, </li>
<li><strong>c:</strong> Zustand zum Zeitpunkt <span class="arithmatex">\(t + t_S + \Delta t\)</span>, </li>
<li><strong>d:</strong> Zustand zum Zeitpunkt <span class="arithmatex">\(t + 2 t_s\)</span></li>
</ul>
<p><img alt="bg height:600 right:40%" src="../images/BusKollision.png" /></p>
<hr />
<h5 id="kollisionserkennung_1">Kollisionserkennung</h5>
<ul>
<li>der Sender <span class="arithmatex">\(n\)</span> erkennt die Kollision nach <span class="arithmatex">\(t+t_s\)</span></li>
<li>Sender <span class="arithmatex">\(1\)</span> erst zum Zeitpunkt <span class="arithmatex">\(t+ 2 t_s\)</span>. </li>
<li>Pakete die k√ºrzer sind als <span class="arithmatex">\(t + 2 t_s\)</span> werden nicht immer durch die Kollisionserkennung erkannt</li>
</ul>
<p><img alt="bg height:600 right:40%" src="../images/BusKollision.png" /></p>
<hr />
<h4 id="auflosen-einer-bus-kollision">Aufl√∂sen einer Bus-Kollision</h4>
<ul>
<li>Nach der Kollisionserkennung √ºbertr√§gt der Sender ein kurzes St√∂rsignal (<strong>jam</strong>), mit dem er alle anderen Teilnehmer √ºber die erkannte Kollision informiert (Broadcast). </li>
<li>Alle sende-willigen Teilnehmer stellen dann ihre Sendung f√ºr eine <strong>zuf√§llige Zeitdauer</strong>, die einem ganzzahligen Vielfachen der maximalen doppelten Signallaufzeit entspricht, zur√ºck und versuchen dann <strong>erneut</strong> den Zugriff.</li>
</ul>
<p><img alt="bg height:600 right:45%" src="../images/BusKollision.png" /></p>
<p><a href="Schnell &amp; Wiedemann 2019">Quelle</a></p>
<hr />
<h4 id="zeitverhalten">Zeitverhalten</h4>
<ul>
<li>mit steigender Busauslastung steigt die Wahrscheinlichkeit einer Kollision</li>
<li>Verz√∂gerung bis zum Zustellerfolg aller
 Nachrichten am Beispiel ETHERNET (CSMA/CD)</li>
</ul>
<p><img alt="bg right height:380" src="../images/ZeitverhaltenEhternet.png" /></p>
<p><a href="Schnell &amp; Wiedemann 2019">Quelle</a></p>
<hr />
<h2 id="aufgabe-5_2_2-bewertung-eines-buszugriffsverfahrens-fur-sicherheitskritische-anwendungen">‚úçÔ∏è Aufgabe 5_2_2:  Bewertung eines Buszugriffsverfahrens f√ºr sicherheitskritische Anwendungen</h2>
<p><center></p>
<p><img alt="" src="../images/Brandszenario.svg" /></p>
<p></center></p>
<ul>
<li>Welche Ans√§tze gibt es bei einem Bussystem, die Leuchten in einer Notsituation garantiert auf den Zustand <code>leuchtend</code> zuschalten?</li>
<li>Annahme, der defekte Schalter sendet dauerhaft den Zustand <code>aus</code> auf den Bus, wenn er er Chance dazu hat</li>
<li>Welches Buszugriffsverfahren sollte genutzt werden?</li>
</ul>
<hr />
<h3 id="losung_1">‚úîÔ∏è L√∂sung</h3>
<ul>
<li>Wenn der defekte Schalter wirklich dauerhaft sendet, dann wird der Bus durch den defekten Schalter blockiert</li>
<li>Beim Master-Slave Verfahren w√ºrde der Master den defekten Schalter erkennen und die Leuchten auf <code>leuchtend</code> schalten und in der Folge den defekten Schalter nicht mehr ansprechen</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../5_1_Signalisierung/" class="btn btn-neutral float-left" title="Signalisierung"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../5_3_Uebertragungssicherheit/" class="btn btn-neutral float-right" title="√úbertragungssicherheit">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../5_1_Signalisierung/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../5_3_Uebertragungssicherheit/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="/javascripts/mathjax.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
